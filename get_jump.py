import pickle
import sys
import timeit
import resource
start_time = timeit.default_timer()
xid=pickle.load(open(sys.argv[1]))
#unconditional_jump=['jmp','j','ja']
ins_path=sys.argv[2]
jump_path=sys.argv[3]

for cc,i in enumerate(xid):
    jmp={}
    tmp=pickle.load(open(ins_path+'/'+i+'.ins.p'))
    for add in tmp:
        if tmp[add] == 'jmp' or tmp[add]=='ja':
            jmp[add]=1
    del tmp
    pickle.dump(jmp,open(jump_path+'/'+i+'.jmp.p','w'))
    del jmp

    #print cc*1.0/len(xid)
elapsed = str(int(timeit.default_timer() - start_time))
ram = str(resource.getrusage(resource.RUSAGE_SELF).ru_maxrss / 1000)
op = str('\n' + 'Get Jumps: ' + '\n' +'Total Time ' + elapsed + ' RAM ' + ram)
with open('Log.txt', 'a') as file:
	file.write(op)
	file.write("\n")
print "DONE!"















